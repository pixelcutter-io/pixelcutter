---
import MarkdownText from "@/components/typography/MarkdownText.astro";
import Typo from "@/components/typography/Typo.astro";
import { useTranslations } from "@/i18n/i18n";

const { lang } = Astro.params;
const t = useTranslations(lang as "en" | "it");

const steps = ["idea", "research", "design", "development", "result"];
---
<div class="how">
  <article>
    <Typo class="title" text={t('home.how.title')} tag="h2" weight="black" color="primary" size={['tr', 'qt']} balancer />
    <MarkdownText text={t('home.how.text')} color="primary" size={['lg', 'xxl']}  />
  </article>
  <div class="list">
    {steps.map((step, index) => (
        <div class="step">
          <div class="number">
            <Typo text={index + 1} tag="p" weight="black" color="primary" size={['xxl', 'big']} balancer />
          </div>
          <article>
            <Typo class="title" text={t(`home.how_step.${step}.title`)} tag="h3" weight="black" color="primary" size={['xxl', 'tr']} balancer />
            <MarkdownText text={t(`home.how_step.${step}.text`)} color="primary" size={['lg', 'xxl']}  />
          </article>
        </div>
      )
    )}
  </div>
</div>

<style lang="scss">
@use '@/styles/mixins/utils';

.how {
  display: grid;
  grid-template-columns: 1fr 2fr;
  background-color: var(--c-secondary);
  gap: 5vw;
}

.how > article{
  display: flex;
  flex-direction: column;
  gap: var(--s-xxl);
}

.how :global(.title) {
  @include utils.last-character;
}

.list {
  display: flex;
  flex-direction: column;
  gap: var(--s-xxl)
}

.step {
  display: grid;
  grid-template-columns: var(--s-qr) 1fr;
  align-items: baseline;
  gap: var(--s-xxl)
}

.number {
  width: var(--s-qr);
  height: var(--s-qr);
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--c-accent);
  aspect-ratio: 1/1;
  border-radius: 50%;
}
</style>
